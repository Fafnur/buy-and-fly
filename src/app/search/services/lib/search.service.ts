import { HttpClient } from '@angular/common/http';
import { DEFAULT_CURRENCY_CODE, inject, Injectable, LOCALE_ID, TransferState } from '@angular/core';
import { map, Observable, of } from 'rxjs';

import { castParams, castQueryParams, ENV_DEFAULT, ENV_KEY, Environment } from '@baf/core';
import { SearchDestination, SearchFlight, SearchFlightOptions, SearchFlightResponse, SearchHotelsOptions } from '@baf/search/common';

export function getSearchFlightOptions(queryParams: Record<string, unknown>, token: string, currency: string): SearchFlightOptions {
  const { from, to, direct, startDate, endDate } = castQueryParams(queryParams);

  if (
    typeof from !== 'string' ||
    typeof to !== 'string' ||
    (typeof direct !== 'boolean' && typeof direct !== 'undefined') ||
    typeof startDate !== 'string' ||
    (typeof endDate !== 'string' && typeof endDate !== 'undefined')
  ) {
    throw new Error('Invalid search flight options');
  }

  return {
    origin: from,
    destination: to,
    direct,
    currency: currency.toLowerCase(),
    departure_at: startDate,
    return_at: endDate,
    token,
    sorting: 'price',
  };
}

@Injectable({
  providedIn: 'root',
})
export class SearchService {
  private readonly httpClient = inject(HttpClient);
  private readonly environment = inject(TransferState).get<Environment>(ENV_KEY, ENV_DEFAULT);
  private readonly currency = inject(DEFAULT_CURRENCY_CODE);
  private readonly localeId = inject(LOCALE_ID);

  findDestination(term: string, types?: string[]): Observable<SearchDestination[]> {
    const withTypes = types?.length ? `&${types.map((type) => `types[]=${type}`).join('&')}` : '';

    return this.httpClient.get<SearchDestination[]>(`/api/autocomplete/places2?locale=${this.localeId}${withTypes}&term=${term}`).pipe(
      map((result) =>
        result.map((item) => ({
          ...item,
          value: item.code,
        })),
      ),
    );
  }

  findFlights(queryParams: Record<string, unknown>): Observable<SearchFlight[]> {
    return of([
      {
        flight_number: '1462',
        link: '/search/MOW2506OVB30061?t=SU17193006001719329400000240SVOOVB17197272001719728100000255OVBSVO_d41f506d4491a47ea98c09b5e9b5bd08_22039\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=22074',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T07:30:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T06:00:00+07:00',
        origin: 'MOW',
        price: 22074,
        return_transfers: 0,
        duration: 495,
        duration_to: 240,
        duration_back: 255,
        transfers: 0,
      },
      {
        flight_number: '2507',
        link: '/search/MOW2506OVB30061?t=S717193201001719348900000240DMEOVB17197275001719728700000260OVBDME_0ae108fe31a4d0f49836f801a9cf32dd_22051\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=22086',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T12:55:00+03:00',
        airline: 'S7',
        destination: 'OVB',
        return_at: '2024-06-30T06:05:00+07:00',
        origin: 'MOW',
        price: 22086,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '2507',
        link: '/search/MOW2506OVB30061?t=S717193201001719348900000240DMEOVB17197359001719737100000260OVBDME_72d392ec3e2e066190ae19ab60900792_23911\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=23949',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T12:55:00+03:00',
        airline: 'S7',
        destination: 'OVB',
        return_at: '2024-06-30T08:25:00+07:00',
        origin: 'MOW',
        price: 23949,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '1462',
        link: '/search/MOW2506OVB30061?t=DP17193006001719329400000240SVOOVB17197362001719737400000260OVBSVO_22897eb1440c3033bcbb4929b5c589dc_24244\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=24282',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T07:30:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 24282,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '1460',
        link: '/search/MOW2506OVB30061?t=SU17193099001719338700000240SVOOVB17197419001719742800000255OVBSVO_2e8a3159176a9b8cf3dd84c226c16e1f_25119\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=25158',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T10:05:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T10:05:00+07:00',
        origin: 'MOW',
        price: 25158,
        return_transfers: 0,
        duration: 495,
        duration_to: 240,
        duration_back: 255,
        transfers: 0,
      },
      {
        flight_number: '787',
        link: '/search/MOW2506OVB30061?t=DP17193492001719378000000240VKOOVB17197362001719737400000260OVBSVO_5e763f2d26bfcf5bdb5718409fe0457d_25673\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=25713',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T21:00:00+03:00',
        airline: 'R3',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 25713,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '2507',
        link: '/search/MOW2506OVB30061?t=DP17193201001719348900000240DMEOVB17197362001719737400000260OVBSVO_4c31f92f2270eaa5b58d2d390b3a12c0_26067\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=26108',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T12:55:00+03:00',
        airline: 'S7',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 26108,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '787',
        link: '/search/MOW2506OVB30061?t=R317193492001719378000000240VKOOVB17197488001719751500000285OVBVKO_91c6d1ce21574fbebbc9707067f682ab_27073\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=27115',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T21:00:00+03:00',
        airline: 'R3',
        destination: 'OVB',
        return_at: '2024-06-30T12:00:00+07:00',
        origin: 'MOW',
        price: 27115,
        return_transfers: 0,
        duration: 525,
        duration_to: 240,
        duration_back: 285,
        transfers: 0,
      },
      {
        flight_number: '485',
        link: '/search/MOW2506OVB30061?t=DP17193414001719380400000410VKOULVOVB17197362001719737400000260OVBSVO_51b6f94ef47a157f0d11875fea3f4194_27268\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=27311',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T18:50:00+03:00',
        airline: 'DP',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 27311,
        return_transfers: 0,
        duration: 670,
        duration_to: 270,
        duration_back: 260,
        transfers: 1,
      },
      {
        flight_number: '465',
        link: '/search/MOW2506OVB30061?t=DP17193264001719380400000660VKOULVOVB17197362001719737400000260OVBSVO_db745abc2864e356bb16bbd595968c04_27268\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=27311',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T14:40:00+03:00',
        airline: 'DP',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 27311,
        return_transfers: 0,
        duration: 920,
        duration_to: 270,
        duration_back: 260,
        transfers: 1,
      },
      {
        flight_number: '6521',
        link: '/search/MOW2506OVB30061?t=DP17193528001719404100000615SVOOMSOVB17197362001719737400000260OVBSVO_9b4f5fa34157e2cbf08cac71bc1277ce_27668\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=27711',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T22:00:00+03:00',
        airline: 'DP',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 27711,
        return_transfers: 0,
        duration: 875,
        duration_to: 275,
        duration_back: 260,
        transfers: 1,
      },
      {
        flight_number: '1512',
        link: '/search/MOW2506OVB30061?t=DP17192796001719329100000585SVOSGCOVB17197362001719737400000260OVBSVO_286d13f3e72209ecfe28da175b93d9c8_27741\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=27785',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T01:40:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 27785,
        return_transfers: 0,
        duration: 845,
        duration_to: 280,
        duration_back: 260,
        transfers: 1,
      },
      {
        flight_number: '1638',
        link: '/search/MOW2506OVB30061?t=DP17192760001719317700000455SVOOMSOVB17197362001719737400000260OVBSVO_be9824687035574c5d269cd4a984075d_28094\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=28138',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T00:40:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 28138,
        return_transfers: 0,
        duration: 715,
        duration_to: 275,
        duration_back: 260,
        transfers: 1,
      },
      {
        flight_number: '387',
        link: '/search/MOW2506OVB30061?t=DP17193573001719404100000540DMEOMSOVB17197362001719737400000260OVBSVO_96dea3c0d2b8b092463a5badbf2a83b6_28710\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=28755',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T23:15:00+03:00',
        airline: 'U6',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 28755,
        return_transfers: 0,
        duration: 800,
        duration_to: 265,
        duration_back: 260,
        transfers: 1,
      },
      {
        flight_number: '6525',
        link: '/search/MOW2506OVB30061?t=DP17193591001719388200000245SVOOVB17197362001719737400000260OVBSVO_137f614bb83c0f2332b9fe24272a808b_28720\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=28765',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T23:45:00+03:00',
        airline: 'DP',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 28765,
        return_transfers: 0,
        duration: 505,
        duration_to: 245,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '485',
        link: '/search/MOW2506OVB30061?t=R317193414001719380400000410VKOULVOVB17197488001719751500000285OVBVKO_1f123cb9f7d4de024dd6656bdafb90cc_28890\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=28935',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T18:50:00+03:00',
        airline: 'DP',
        destination: 'OVB',
        return_at: '2024-06-30T12:00:00+07:00',
        origin: 'MOW',
        price: 28935,
        return_transfers: 0,
        duration: 695,
        duration_to: 270,
        duration_back: 285,
        transfers: 1,
      },
      {
        flight_number: '1462',
        link: '/search/MOW2506OVB30061?t=SU17193006001719329400000240SVOOVB17197272001719728100000255OVBSVO_d41f506d4491a47ea98c09b5e9b5bd08_29058\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=29104',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T07:30:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T06:00:00+07:00',
        origin: 'MOW',
        price: 29104,
        return_transfers: 0,
        duration: 495,
        duration_to: 240,
        duration_back: 255,
        transfers: 0,
      },
      {
        flight_number: '787',
        link: '/search/MOW2506OVB30061?t=SU17193492001719378000000240VKOOVB17197419001719742800000255OVBSVO_15dcea4d52ad9a95b95b9e3d1328c6f8_29289\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=29335',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T21:00:00+03:00',
        airline: 'R3',
        destination: 'OVB',
        return_at: '2024-06-30T10:05:00+07:00',
        origin: 'MOW',
        price: 29335,
        return_transfers: 0,
        duration: 495,
        duration_to: 240,
        duration_back: 255,
        transfers: 0,
      },
      {
        flight_number: '1512',
        link: '/search/MOW2506OVB30061?t=R317192796001719329100000585SVOSGCOVB17197488001719751500000285OVBVKO_14b28ba3e18a7dd93589a84aebc56d4d_29427\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=29473',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T01:40:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T12:00:00+07:00',
        origin: 'MOW',
        price: 29473,
        return_transfers: 0,
        duration: 870,
        duration_to: 280,
        duration_back: 285,
        transfers: 1,
      },
      {
        flight_number: '1638',
        link: '/search/MOW2506OVB30061?t=R317192760001719317700000455SVOOMSOVB17197488001719751500000285OVBVKO_194ac2d9e714ae2b9927be76470e6407_29716\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=29763',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T00:40:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T12:00:00+07:00',
        origin: 'MOW',
        price: 29763,
        return_transfers: 0,
        duration: 740,
        duration_to: 275,
        duration_back: 285,
        transfers: 1,
      },
      {
        flight_number: '1462',
        link: '/search/MOW2506OVB30061?t=SU17193006001719329400000240SVOOVB17197419001719742800000255OVBSVO_84237ad07347e57cf04acd7bdaf5959d_30270\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30318',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T07:30:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T10:05:00+07:00',
        origin: 'MOW',
        price: 30318,
        return_transfers: 0,
        duration: 495,
        duration_to: 240,
        duration_back: 255,
        transfers: 0,
      },
      {
        flight_number: '787',
        link: '/search/MOW2506OVB30061?t=DP17193492001719378000000240VKOOVB17197521001719814800001285OVBBAXSVO_62cc3cfd6ee2af613e531ba5ce65bbc3_30330\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30378',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T21:00:00+03:00',
        airline: 'R3',
        destination: 'OVB',
        return_at: '2024-06-30T12:55:00+07:00',
        origin: 'MOW',
        price: 30378,
        return_transfers: 1,
        duration: 1525,
        duration_to: 240,
        duration_back: 320,
        transfers: 0,
      },
      {
        flight_number: '387',
        link: '/search/MOW2506OVB30061?t=R317193573001719404100000540DMEOMSOVB17197488001719751500000285OVBVKO_64f97c81fa11099f67609061b5ad0da6_30332\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30380',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T23:15:00+03:00',
        airline: 'U6',
        destination: 'OVB',
        return_at: '2024-06-30T12:00:00+07:00',
        origin: 'MOW',
        price: 30380,
        return_transfers: 0,
        duration: 825,
        duration_to: 265,
        duration_back: 285,
        transfers: 1,
      },
      {
        flight_number: '787',
        link: '/search/MOW2506OVB30061?t=DP17193492001719378000000240VKOOVB17197362001719737400000260OVBSVO_5e763f2d26bfcf5bdb5718409fe0457d_30447\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30495',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T21:00:00+03:00',
        airline: 'R3',
        destination: 'OVB',
        return_at: '2024-06-30T08:30:00+07:00',
        origin: 'MOW',
        price: 30495,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '485',
        link: '/search/MOW2506OVB30061?t=SU17193414001719380400000410VKOULVOVB17197419001719742800000255OVBSVO_fe6146025608792ae1e0ce345c888818_30589\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30637',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T18:50:00+03:00',
        airline: 'DP',
        destination: 'OVB',
        return_at: '2024-06-30T10:05:00+07:00',
        origin: 'MOW',
        price: 30637,
        return_transfers: 0,
        duration: 665,
        duration_to: 270,
        duration_back: 255,
        transfers: 1,
      },
      {
        flight_number: '2507',
        link: '/search/MOW2506OVB30061?t=DP17193201001719348900000240DMEOVB17197521001719814800001285OVBBAXSVO_5d7058e6a9f0a07de278e2df372b0835_30796\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30844',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T12:55:00+03:00',
        airline: 'S7',
        destination: 'OVB',
        return_at: '2024-06-30T12:55:00+07:00',
        origin: 'MOW',
        price: 30844,
        return_transfers: 1,
        duration: 1525,
        duration_to: 240,
        duration_back: 320,
        transfers: 0,
      },
      {
        flight_number: '2507',
        link: '/search/MOW2506OVB30061?t=S717193201001719348900000240DMEOVB17197275001719728700000260OVBDME_0ae108fe31a4d0f49836f801a9cf32dd_30861\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=30909',
        origin_airport: 'DME',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T12:55:00+03:00',
        airline: 'S7',
        destination: 'OVB',
        return_at: '2024-06-30T06:05:00+07:00',
        origin: 'MOW',
        price: 30909,
        return_transfers: 0,
        duration: 500,
        duration_to: 240,
        duration_back: 260,
        transfers: 0,
      },
      {
        flight_number: '787',
        link: '/search/MOW2506OVB30061?t=R317193492001719378000000240VKOOVB17197488001719751500000285OVBVKO_91c6d1ce21574fbebbc9707067f682ab_31392\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=31441',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T21:00:00+03:00',
        airline: 'R3',
        destination: 'OVB',
        return_at: '2024-06-30T12:00:00+07:00',
        origin: 'MOW',
        price: 31441,
        return_transfers: 0,
        duration: 525,
        duration_to: 240,
        duration_back: 285,
        transfers: 0,
      },
      {
        flight_number: '1638',
        link: '/search/MOW2506OVB30061?t=SU17192760001719317700000455SVOOMSOVB17197419001719742800000255OVBSVO_fce18f1b991f7c7586037ab8c1b56112_31415\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=31464',
        origin_airport: 'SVO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T00:40:00+03:00',
        airline: 'SU',
        destination: 'OVB',
        return_at: '2024-06-30T10:05:00+07:00',
        origin: 'MOW',
        price: 31464,
        return_transfers: 0,
        duration: 710,
        duration_to: 275,
        duration_back: 255,
        transfers: 1,
      },
      {
        flight_number: '247',
        link: '/search/MOW2506OVB30061?t=UT17193486001719390000000450VKOSGCOVB17197812001719822900000935OVBSGCVKO_95c07cd5e654cb051529a49923b8e0f1_31725\u0026search_date=16062024\u0026expected_price_uuid=2aae2640-ba27-48f1-b9c2-3bef54133900\u0026expected_price_source=share\u0026expected_price_currency=rub\u0026expected_price=31775',
        origin_airport: 'VKO',
        destination_airport: 'OVB',
        departure_at: '2024-06-25T20:50:00+03:00',
        airline: 'UT',
        destination: 'OVB',
        return_at: '2024-06-30T21:00:00+07:00',
        origin: 'MOW',
        price: 31775,
        return_transfers: 1,
        duration: 1385,
        duration_to: 340,
        duration_back: 365,
        transfers: 1,
      },
    ]);
    // const params = castParams(getSearchFlightOptions(queryParams, this.environment.aviasalesToken, this.currency));
    //
    // return this.httpClient.get<SearchFlightResponse>('/api/aviasales/v3/prices_for_dates', { params }).pipe(map(({ data }) => data));
  }

  findHotels(options: SearchHotelsOptions): Observable<any> {
    return this.httpClient.get('/api');
  }

  findTours(options: any): Observable<any> {
    return this.httpClient.get('/api');
  }

  findRailways(options: any): Observable<any> {
    return this.httpClient.get('/api');
  }
}
